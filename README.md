# Resume Scout

An AI-assisted resume review tool that scores job applications against ATS heuristics, persists candidate data inside the Puter platform, and renders a polished experience with React Router 7, Vite, and Tailwind 4.

## Table of Contents

- [Overview](#overview)
- [Feature Highlights](#feature-highlights)
- [Architecture at a Glance](#architecture-at-a-glance)
- [Project Structure](#project-structure)
- [Primary Routes & Flows](#primary-routes--flows)
- [Getting Started](#getting-started)
- [Operational Commands](#operational-commands)
- [Docker Image](#docker-image)
- [Working with Puter](#working-with-puter)
- [Quality Gates & Tooling](#quality-gates--tooling)
- [Troubleshooting Notes](#troubleshooting-notes)

## Overview

Resume Scout helps candidates iterate on their resumes with a feedback loop that mirrors what modern recruiting stacks use. Users authenticate with Puter, upload a PDF, describe the target role, and receive a structured review generated by Puter AI (Claude Sonnet 4). Each submission is persisted inside the user's Puter storage so they can revisit analyses, download the original document, and monitor improvements over time.

The application is production-ready out of the box: server-side rendered with React Router 7, strongly typed with TypeScript, styled via Tailwind 4 utilities, and packaged for predictable deployments through a multi-stage Node 20 Dockerfile.

## Feature Highlights

- **AI-native resume diagnostics** – `constants/index.ts` defines the JSON contract that guides Puter AI to produce ATS, tone, structure, and skills feedback with actionable tips.
- **Puter-first persistence** – `app/lib/puter.ts` wraps `window.puter` APIs (auth, fs, kv, ai) inside a Zustand store so the UI can read and write user-owned data without leaking credentials.
- **PDF-to-image rendering pipeline** – `app/lib/pdf2img.ts` uses `pdfjs-dist` to convert the resume's first page into a high-resolution PNG that can be previewed and sent to the AI model.
- **Rich telemetry for candidates** – `app/components/Summary.tsx`, `ATS.tsx`, and `Details.tsx` visualize the AI response with gauges, accordions, and contextual callouts.
- **Operational safety valves** – `app/routes/wipe.tsx` provides an authenticated admin surface to flush Puter storage during testing; `tsconfig.json` is strict, and `npm run typecheck` prevents schema drift.

## Architecture at a Glance

```
[React Router 7 SSR]  --(hooks/usePuterStore)--> [Zustand store]
        |                                         |
        v                                         v
[Routes: home/upload/resume/wipe] ---> [Puter APIs: auth · fs · ai · kv]
        |                                         |
        v                                         v
[UI components / Tailwind 4]       <--- JSON feedback + asset handles
```

- **Routing & rendering** – `app/root.tsx` bootstraps SSR, injects the Puter SDK script, and restores scroll/state via the React Router runtime.
- **State management** – `usePuterStore` orchestrates async auth, file, kv, and AI calls while exposing derived state (`auth.isAuthenticated`, `puterReady`, etc.) directly to routes.
- **Data model** – `types/index.d.ts` defines the `Resume` and `Feedback` schema persisted in the Puter KV store (`resume:{uuid}` keys) and mirrored in components.
- **Styling** – Tailwind 4 utilities live in `app/app.css`, alongside bespoke tokens for gradients, badges, and layout primitives.
- **Build system** – Vite drives local dev (`npm run dev`), React Router CLI handles SSR builds (`npm run build`), and Node 20 hosts the production server (`npm run start`).

## Project Structure

```
.
├── app/
│   ├── components/           # Presentation widgets (ATS, Summary, ResumeCard…)
│   ├── lib/                  # Puter store, pdf -> image helper, shared utils
│   ├── routes/               # React Router file-based routes (home, upload, resume…)
│   ├── app.css               # Tailwind layer config + design tokens
│   └── root.tsx              # SSR layout, error boundary, Puter bootstrap
├── constants/                # AI prompt + response schema contract
├── public/                   # Static images/icons for the UI
├── types/                    # Global TypeScript interfaces (Resume, Puter types)
├── package.json              # Scripts and dependency graph
├── react-router.config.ts    # Enables SSR mode
├── tsconfig.json             # Strict TS configuration with path aliases (~/*)
└── vite.config.ts            # Vite + Tailwind + React Router plugins
```

## Primary Routes & Flows

| Route | File | Purpose |
| --- | --- | --- |
| `/` | `app/routes/home.tsx` | Lists previously analyzed resumes by reading Puter KV (`resume:*`) and surfaces previews via `ResumeCard`. Redirects to `/auth` if the session expires. |
| `/upload` | `app/routes/upload.tsx` | Captures company, job title, and description, uploads the PDF to Puter FS, runs `convertPdfToImage`, and sends both the PDF image path plus prompt to `puter.ai.chat`. Results are persisted back into KV. |
| `/resume/:id` | `app/routes/resume.tsx` | Fetches a single resume, streams the stored PDF/image blobs for preview, and renders `Summary`, `ATS`, and `Details` with the parsed `Feedback` object. |
| `/auth` | `app/routes/auth.tsx` | Thin UI that proxies Puter sign-in/out flows; redirects to the `next` query param when authenticated. |
| `/wipe` | `app/routes/wipe.tsx` | Developer-only utility to enumerate Puter FS items, delete them, and flush KV keys. Useful when resetting demo data. |

## Getting Started

### Prerequisites

- Node.js 20+
- npm 10+
- A Puter account with access to the [Puter SDK](https://puter.com/) (needed for auth, storage, and AI). The SDK is loaded at runtime from `https://js.puter.com/v2/`.

### Installation

```bash
git clone <repo-url>
cd resumescout
npm install
```

### Local Development

```bash
npm run dev
```

- Runs the Vite-powered React Router dev server on `http://localhost:5173`.
- Navigate to `/auth` to sign in with Puter before exercising `/`, `/upload`, or `/resume/:id`.
- Hot Module Replacement is enabled for routes, components, and styles.

### Production Build

```bash
npm run build   # Generates ./.react-router + build/client + build/server
npm run start   # Serves the SSR bundle via @react-router/serve
```

The build artifacts (client + server bundles) are self-contained and require only the Puter SDK script to be reachable at runtime.

## Operational Commands

| Command | Description |
| --- | --- |
| `npm run dev` | React Router + Vite dev server with HMR. |
| `npm run build` | Produces the production bundle (SSR server + client assets). |
| `npm run start` | Starts the built server (`react-router-serve ./build/server/index.js`). |
| `npm run typecheck` | Runs `react-router typegen` followed by `tsc --noEmit` for schema validation. |

## Docker Image

A multi-stage Dockerfile (`Dockerfile`) is included for reproducible deployments:

```bash
docker build -t resumescout .
docker run -p 3000:3000 resumescout
```

- Stage 1 installs dev dependencies (needed for the build).
- Stage 2 installs only production dependencies.
- Stage 3 builds the SSR bundle.
- Final stage ships the minimal Node 20 runtime with the compiled assets and boots via `npm run start`.

## Working with Puter

- **SDK bootstrap** – `app/root.tsx` injects `<script src="https://js.puter.com/v2/">` and the Zustand store polls until `window.puter` is available (`usePuterStore.init()`).
- **Authentication** – The store exposes `auth.signIn`, `auth.signOut`, and `auth.checkAuthStatus`. Routes gate access by checking `auth.isAuthenticated` and redirecting to `/auth?next=<path>` when needed.
- **Storage** – Binary assets (original PDF, generated PNG) live in Puter FS and are fetched through `fs.read`. Structured metadata is persisted inside Puter KV under deterministic keys.
- **AI** – `ai.feedback` composes a multi-part message (file reference + prompt) and calls `puter.ai.chat` with the Claude Sonnet 4 model. The response is enforced to match `AIResponseFormat`, then parsed to `Feedback`.

## Quality Gates & Tooling

- **Type safety** – Strict TypeScript, global ambient types (`types/*.d.ts`), and `npm run typecheck` catch contract regressions.
- **State isolation** – Zustand cleanly separates Puter integration from presentation, simplifying mocking during tests or storybook work.
- **Styling discipline** – Tailwind 4 utilities plus a small design system in `app/app.css` keep styles predictable and themeable.
- **Future testing** – UI flows are deterministic and ready for Cypress/Playwright coverage; `app/routes/upload.tsx` is designed for dependency injection should you need to stub Puter APIs in tests.

## Troubleshooting Notes

- **`Puter.js not available` errors** usually indicate the SDK script failed to load. Ensure network access to `https://js.puter.com/v2/` and that you are serving over HTTPS if Puter enforces it in your environment.
- **Authentication loops** happen when the Puter session expires; revisit `/auth`, sign in again, and you will be redirected to the `next` param.
- **AI feedback parsing** expects valid JSON with no Markdown fences. When adjusting the prompt (`constants/index.ts`), keep the schema synchronized with `types/index.d.ts`.
- **Data resets** – `/wipe` will delete every stored file and KV record for the authenticated user. Keep it behind appropriate auth if you deploy this to end users.
